https://www.instagram.com/reel/C-lkhbstlz8/?igsh=MXZtNmViODN0enlzNw==
https://www.instagram.com/reel/C-nLzX5tgBB/?igsh=MW1oZXVybjJhejZnMA==

cd "\\TP-Share\G\shared\jellyfin\shows\downloaded"; date; pwd; date; yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4" -i "https://www.instagram.com/reel/C-nLzX5tgBB/"; date;

cd "\\TP-Share\G\shared\jellyfin\shows\downloaded"; date; pwd; date; yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4"  --sponsorblock-mark all --sponsorblock-remove all -i "https://youtu.be/DORZA_S7f9w"; date;




$url = "https://youtu.be/agWX23xZrh0"; $tempDir = "C:\Temp\yt-dlp"; New-Item -ItemType Directory -Path $tempDir -Force; yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4" --sponsorblock-mark all --sponsorblock-remove all --merge-output-format mp4 -o "$tempDir\%(title)s.%(ext)s" $url; $videoFile = Get-ChildItem -Path $tempDir -Filter *.mp4 | Select-Object -First 1; ffmpeg -i "$($videoFile.FullName)" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4"; Move-Item -Path "$tempDir\$($videoFile.BaseName)_reencoded.mp4" -Destination "\\TP-Share\G\shared\jellyfin\shows\downloaded"; Remove-Item -Path $tempDir -Recurse -Force

    Directory: C:\Temp

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d----           8/16/2024  4:44 PM                yt-dlp
[debug] Command-line config: ['--verbose', '--write-sub', '--sub-lang', 'en', '--restrict-filenames', '--add-metadata', '-f', 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4', '--sponsorblock-mark', 'all', '--sponsorblock-remove', 'all', '--merge-output-format', 'mp4', '-o', 'C:\\Temp\\yt-dlp\\%(title)s.%(ext)s', 'https://youtu.be/agWX23xZrh0']
[debug] Portable config "C:\Users\kushal\scoop\apps\yt-dlp\current\yt-dlp.conf": []
[debug] Encodings: locale cp1252, fs utf-8, pref cp1252, out utf-8, error utf-8, screen utf-8
[debug] yt-dlp version stable@2024.08.06 from yt-dlp/yt-dlp [4d9231208] (win_exe)
[debug] Python 3.8.10 (CPython AMD64 64bit) - Windows-10-10.0.22631-SP0 (OpenSSL 1.1.1k  25 Mar 2021)
[debug] exe versions: ffmpeg 7.0.2-full_build-www.gyan.dev (setts), ffprobe 7.0.2-full_build-www.gyan.dev
[debug] Optional libraries: Cryptodome-3.20.0, brotli-1.1.0, certifi-2024.07.04, curl_cffi-0.5.10, mutagen-1.47.0, requests-2.32.3, sqlite3-3.35.5, urllib3-2.2.2, websockets-12.0
[debug] Proxy map: {}
[debug] Request Handlers: urllib, requests, websockets, curl_cffi
[debug] Loaded 1830 extractors
[youtube] Extracting URL: https://youtu.be/agWX23xZrh0
[youtube] agWX23xZrh0: Downloading webpage
[youtube] agWX23xZrh0: Downloading ios player API JSON
[youtube] agWX23xZrh0: Downloading web creator player API JSON
[debug] Loading youtube-nsig.53afa3ce from cache
[debug] [youtube] Decrypted nsig 5ANcaK27_oxE3UOpm => nOHdyheo7vJ-3g
[youtube] agWX23xZrh0: Downloading m3u8 information
[debug] Sort order given by extractor: quality, res, fps, hdr:12, source, vcodec:vp9.2, channels, acodec, lang, proto
[debug] Formats sorted by: hasvid, ie_pref, quality, res, fps, hdr:12(7), source, vcodec:vp9.2(10), channels, acodec, lang, proto, size, br, asr, vext, aext, hasaud, id
[SponsorBlock] Fetching SponsorBlock segments
[debug] SponsorBlock query: https://sponsor.ajay.app/api/skipSegments/4039?service=YouTube&categories=%5B%22chapter%22%2C+%22outro%22%2C+%22interaction%22%2C+%22music_offtopic%22%2C+%22filler%22%2C+%22poi_highlight%22%2C+%22selfpromo%22%2C+%22sponsor%22%2C+%22preview%22%2C+%22intro%22%5D&actionTypes=%5B%22skip%22%2C+%22poi%22%2C+%22chapter%22%5D
[SponsorBlock] No matching segments were found in the SponsorBlock database
[info] Testing format 616
[hlsnative] Downloading m3u8 manifest
[hlsnative] Total fragments: 11
[download] Destination: C:\Users\kushal\src\myhtml\fromnepal\tmpsrl1a6_o.tmp
[debug] File locking is not supported. Proceeding without locking
[download] 100% of    712.00B in 00:00:00 at 7.73KiB/s
[info] agWX23xZrh0: Downloading 1 format(s): 616+140
[info] There are no subtitles for the requested languages
[debug] Invoking hlsnative downloader on "https://manifest.googlevideo.com/api/manifest/hls_playlist/expire/1723862652/ei/HLq_ZqzbHb2AkucP7bLssAc/ip/70.104.195.206/id/6a0597db7c59ae1d/itag/616/source/youtube/requiressl/yes/ratebypass/yes/pfa/1/wft/1/sgovp/clen%3D25973667%3Bdur%3D59.726%3Bgir%3Dyes%3Bitag%3D356%3Blmt%3D1723771187589378/rqh/1/hls_chunk_host/rr1---sn-8xgp1vo-gpjl.googlevideo.com/xpc/EgVo2aDSNQ%3D%3D/mh/qZ/mm/31,29/mn/sn-8xgp1vo-gpjl,sn-8xgp1vo-p5qe/ms/au,rdu/mv/m/mvi/1/pl/20/initcwndbps/1285000/vprv/1/playlist_type/DVR/dover/13/txp/543C434/mt/1723840886/fvip/5/short_key/1/keepalive/yes/sparams/expire,ei,ip,id,itag,source,requiressl,ratebypass,pfa,wft,sgovp,rqh,xpc,vprv,playlist_type/sig/AJfQdSswRAIgNepjacVJXh2nOovg45_45L9xEiLlQbwoCQq9JREvW1UCIGhBxyTvb5dSGyiUj9yEuqhb6dLh3qQE7zQMzGQoySVV/lsparams/hls_chunk_host,mh,mm,mn,ms,mv,mvi,pl,initcwndbps/lsig/AGtxev0wRAIfD5Em4byWGcNEsm_HAPPHPqNIbN9rzFhDtQu7ZMCi5wIhAKMBG_GUsKmuYMyJ8pNrgkJueaCj2p68RIugU5N7qG0h/playlist/index.m3u8"
[hlsnative] Downloading m3u8 manifest
[hlsnative] Total fragments: 11
[download] Destination: C:\Temp\yt-dlp\Philosophical_Security_System.f616.mp4
[download] 100% of   24.78MiB in 00:00:04 at 5.92MiB/s
[debug] Invoking http downloader on "https://rr1---sn-8xgp1vo-gpjl.googlevideo.com/videoplayback?expire=1723862652&ei=HLq_ZqzbHb2AkucP7bLssAc&ip=70.104.195.206&id=o-APFXBAqMGUlRuc15fmhgeigZ-iHPg6sQcFhFJvionCLi&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&mh=qZ&mm=31%2C29&mn=sn-8xgp1vo-gpjl%2Csn-8xgp1vo-p5qe&ms=au%2Crdu&mv=m&mvi=1&pl=20&initcwndbps=1285000&vprv=1&svpuc=1&mime=audio%2Fmp4&rqh=1&gir=yes&clen=968792&dur=59.791&lmt=1723769565748823&mt=1723840886&fvip=5&keepalive=yes&c=IOS&txp=5432434&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRQIgP0dHueBFpe3MiQtobmCLgIePJ__gBIrqMz3F_MvYOeICIQC7X0CfJ5-KasXvCBubZk3vjNqGhD_AG7ylYEXzqOsZWw%3D%3D&lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AGtxev0wRQIhAOQoF-YoubXjDlaS4yv_rfcK47q7S2Vwn0JEUKlOXkm2AiAITGN1EsqLBQi7RHQ5_7YRLeZEpp7Zp9XXpz6NBEpu4Q%3D%3D"
[download] Destination: C:\Temp\yt-dlp\Philosophical_Security_System.f140.m4a
[download] 100% of  946.09KiB in 00:00:00 at 1.96MiB/s
[Merger] Merging formats into "C:\Temp\yt-dlp\Philosophical_Security_System.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\Philosophical_Security_System.f616.mp4 -i file:C:\Temp\yt-dlp\Philosophical_Security_System.f140.m4a -c copy -map 0:v:0 -map 1:a:0 -movflags +faststart file:C:\Temp\yt-dlp\Philosophical_Security_System.temp.mp4
Deleting original file C:\Temp\yt-dlp\Philosophical_Security_System.f140.m4a (pass -k to keep)
Deleting original file C:\Temp\yt-dlp\Philosophical_Security_System.f616.mp4 (pass -k to keep)
[ModifyChapters] SponsorBlock information is unavailable
[Metadata] Adding metadata to "C:\Temp\yt-dlp\Philosophical_Security_System.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\Philosophical_Security_System.mp4 -map 0 -dn -ignore_unknown -c copy -write_id3v1 1 -metadata "title=Philosophical Security System" -metadata "date=20240815" -metadata "purl=https://www.youtube.com/watch?v=agWX23xZrh0" -metadata "comment=https://www.youtube.com/watch?v=agWX23xZrh0" -metadata "artist=Studio C" -metadata:s:1 "language=eng" -movflags +faststart file:C:\Temp\yt-dlp\Philosophical_Security_System.temp.mp4
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Temp\yt-dlp\Philosophical_Security_System.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    title           : Philosophical Security System
    artist          : Studio C
    date            : 20240815
    encoder         : Lavf61.1.100
    comment         : https://www.youtube.com/watch?v=agWX23xZrh0
  Duration: 00:00:59.79, start: 0.000000, bitrate: 3609 kb/s
  Stream #0:0[0x1](und): Video: vp9 (Profile 0) (vp09 / 0x39307076), yuv420p(tv, bt709), 1080x1920, 3477 kb/s, 29.97 fps, 29.97 tbr, 16k tbn (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc. Created on: 08/16/2024.
        vendor_id       : [0][0][0][0]
  Stream #0:1[0x2](eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc.
        vendor_id       : [0][0][0][0]
Stream mapping:
  Stream #0:0 -> #0:0 (vp9 (native) -> h264 (libx264))
  Stream #0:1 -> #0:1 (aac (native) -> aac (native))
Press [q] to stop, [?] for help
[libx264 @ 000002358e6beb80] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 BMI2 AVX2
[libx264 @ 000002358e6beb80] profile High, level 4.0, 4:2:0, 8-bit
[libx264 @ 000002358e6beb80] 264 - core 164 r3191 4613ac3 - H.264/MPEG-4 AVC codec - Copyleft 2003-2024 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=24 lookahead_threads=4 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'C:\Temp\yt-dlp\Philosophical_Security_System_reencoded.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    title           : Philosophical Security System
    artist          : Studio C
    date            : 20240815
    comment         : https://www.youtube.com/watch?v=agWX23xZrh0
    encoder         : Lavf61.1.100
  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt709, progressive), 1080x1920, q=2-31, 29.97 fps, 30k tbn (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc. Created on: 08/16/2024.
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.3.100 libx264
      Side data:
        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc.
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.3.100 aac
[mp4 @ 000002358e836c40] Starting second pass: moving the moov atom to the beginning of the file
[out#0/mp4 @ 000002358e6be840] video:22382KiB audio:950KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.278542%
frame= 1790 fps=137 q=-1.0 Lsize=   23397KiB time=00:00:59.65 bitrate=3212.7kbits/s speed=4.57x
[libx264 @ 000002358e6beb80] frame I:18    Avg QP:19.46  size: 79500
[libx264 @ 000002358e6beb80] frame P:452   Avg QP:21.82  size: 27520
[libx264 @ 000002358e6beb80] frame B:1320  Avg QP:24.74  size:  6855
[libx264 @ 000002358e6beb80] consecutive B-frames:  1.2%  1.0%  1.0% 96.8%
[libx264 @ 000002358e6beb80] mb I  I16..4: 17.8% 61.1% 21.1%
[libx264 @ 000002358e6beb80] mb P  I16..4:  5.6% 11.5%  1.1%  P16..4: 38.9%  8.6%  3.7%  0.0%  0.0%    skip:30.6%
[libx264 @ 000002358e6beb80] mb B  I16..4:  0.6%  0.9%  0.1%  B16..8: 32.1%  1.9%  0.3%  direct: 1.4%  skip:62.7%  L0:45.5% L1:51.3% BI: 3.1%
[libx264 @ 000002358e6beb80] 8x8 transform intra:61.9% inter:81.0%
[libx264 @ 000002358e6beb80] coded y,uvDC,uvAC intra: 30.9% 34.4% 6.1% inter: 7.0% 8.9% 0.0%
[libx264 @ 000002358e6beb80] i16 v,h,dc,p: 28% 39% 10% 23%
[libx264 @ 000002358e6beb80] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 25% 24% 29%  3%  4%  4%  4%  3%  3%
[libx264 @ 000002358e6beb80] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 27% 12%  4%  7%  6%  7%  4%  4%
[libx264 @ 000002358e6beb80] i8c dc,h,v,p: 53% 26% 18%  3%
[libx264 @ 000002358e6beb80] Weighted P-Frames: Y:0.0% UV:0.0%
[libx264 @ 000002358e6beb80] ref P L0: 59.7% 10.9% 21.8%  7.6%
[libx264 @ 000002358e6beb80] ref B L0: 87.5% 10.0%  2.5%
[libx264 @ 000002358e6beb80] ref B L1: 95.2%  4.8%
[libx264 @ 000002358e6beb80] kb/s:3069.78
[aac @ 000002358e680340] Qavg: 819.274








PS C:\Users\kushal\src\myhtml\fromnepal> $url = "https://youtu.be/mciDRnz8nrM"; $tempDir = "C:\Temp\yt-dlp"; New-Item -ItemType Directory -Path $tempDir -Force; yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4" --sponsorblock-mark all --sponsorblock-remove all --merge-output-format mp4 -o "$tempDir\%(title)s.%(ext)s" $url; $videoFile = Get-ChildItem -Path $tempDir -Filter *.mp4 | Select-Object -First 1; $subtitleFile = Get-ChildItem -Path $tempDir -Filter *.vtt | Select-Object -First 1; if ($subtitleFile) { ffmpeg -i "$($videoFile.FullName)" -vf "subtitles='$($subtitleFile.FullName)'" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4" } else { ffmpeg -i "$($videoFile.FullName)" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4" }; Move-Item -Path "$tempDir\$($videoFile.BaseName)_reencoded.mp4" -Destination "\\TP-Share\G\shared\jellyfin\shows\downloaded"; Remove-Item -Path $tempDir -Recurse -Force

    Directory: C:\Temp

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d----           8/16/2024  4:57 PM                yt-dlp
[debug] Command-line config: ['--verbose', '--write-sub', '--sub-lang', 'en', '--restrict-filenames', '--add-metadata', '-f', 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4', '--sponsorblock-mark', 'all', '--sponsorblock-remove', 'all', '--merge-output-format', 'mp4', '-o', 'C:\\Temp\\yt-dlp\\%(title)s.%(ext)s', 'https://youtu.be/mciDRnz8nrM']
[debug] Portable config "C:\Users\kushal\scoop\apps\yt-dlp\current\yt-dlp.conf": []
[debug] Encodings: locale cp1252, fs utf-8, pref cp1252, out utf-8, error utf-8, screen utf-8
[debug] yt-dlp version stable@2024.08.06 from yt-dlp/yt-dlp [4d9231208] (win_exe)
[debug] Python 3.8.10 (CPython AMD64 64bit) - Windows-10-10.0.22631-SP0 (OpenSSL 1.1.1k  25 Mar 2021)
[debug] exe versions: ffmpeg 7.0.2-full_build-www.gyan.dev (setts), ffprobe 7.0.2-full_build-www.gyan.dev
[debug] Optional libraries: Cryptodome-3.20.0, brotli-1.1.0, certifi-2024.07.04, curl_cffi-0.5.10, mutagen-1.47.0, requests-2.32.3, sqlite3-3.35.5, urllib3-2.2.2, websockets-12.0
[debug] Proxy map: {}
[debug] Request Handlers: urllib, requests, websockets, curl_cffi
[debug] Loaded 1830 extractors
[youtube] Extracting URL: https://youtu.be/mciDRnz8nrM
[youtube] mciDRnz8nrM: Downloading webpage
[youtube] mciDRnz8nrM: Downloading ios player API JSON
[youtube] mciDRnz8nrM: Downloading web creator player API JSON
[debug] Loading youtube-nsig.53afa3ce from cache
[debug] [youtube] Decrypted nsig gXx2IotHLkl0ypH_R => gFCUSiz2U-vMTQ
[youtube] mciDRnz8nrM: Downloading m3u8 information
[debug] Sort order given by extractor: quality, res, fps, hdr:12, source, vcodec:vp9.2, channels, acodec, lang, proto
[debug] Formats sorted by: hasvid, ie_pref, quality, res, fps, hdr:12(7), source, vcodec:vp9.2(10), channels, acodec, lang, proto, size, br, asr, vext, aext, hasaud, id
[SponsorBlock] Fetching SponsorBlock segments
[debug] SponsorBlock query: https://sponsor.ajay.app/api/skipSegments/ba58?service=YouTube&categories=%5B%22interaction%22%2C+%22outro%22%2C+%22intro%22%2C+%22music_offtopic%22%2C+%22preview%22%2C+%22sponsor%22%2C+%22poi_highlight%22%2C+%22filler%22%2C+%22chapter%22%2C+%22selfpromo%22%5D&actionTypes=%5B%22skip%22%2C+%22poi%22%2C+%22chapter%22%5D
[SponsorBlock] No matching segments were found in the SponsorBlock database
[info] mciDRnz8nrM: Downloading 1 format(s): 609+140
[info] There are no subtitles for the requested languages
[debug] Invoking hlsnative downloader on "https://manifest.googlevideo.com/api/manifest/hls_playlist/expire/1723863442/ei/Mr2_ZrH-J8aGkucP0s6K8AM/ip/70.104.195.206/id/99c883467cfc9eb3/itag/609/source/youtube/requiressl/yes/ratebypass/yes/pfa/1/wft/1/sgovp/clen%3D442309%3Bdur%3D8.333%3Bgir%3Dyes%3Bitag%3D247%3Blmt%3D1721153215781439/rqh/1/hls_chunk_host/rr3---sn-8xgp1vo-gpje.googlevideo.com/xpc/EgVo2aDSNQ%3D%3D/mh/Zm/mm/31,29/mn/sn-8xgp1vo-gpje,sn-8xgp1vo-p5qe/ms/au,rdu/mv/m/mvi/3/pl/20/initcwndbps/1132500/vprv/1/playlist_type/DVR/dover/13/txp/553C434/mt/1723841605/fvip/8/short_key/1/keepalive/yes/sparams/expire,ei,ip,id,itag,source,requiressl,ratebypass,pfa,wft,sgovp,rqh,xpc,vprv,playlist_type/sig/AJfQdSswRQIhAJeKHNt9_ylPJZ8v9ItMZ5MI2LRLN8zBxhWo8ekM7z_AAiBJvz91i7O4FADz0ihhlcanQiaMgR-DL4EjzgGNEuTZ0Q%3D%3D/lsparams/hls_chunk_host,mh,mm,mn,ms,mv,mvi,pl,initcwndbps/lsig/AGtxev0wRQIgfvU-S1LRM6mEzB1j_d_kywXFHcFk97dhu9RxeEVdNAMCIQCn2t2ZyInPXBR3mELMSXgCZeKcRJTDoEKxsv6xbz5-Pg%3D%3D/playlist/index.m3u8"
[hlsnative] Downloading m3u8 manifest
[hlsnative] Total fragments: 2
[download] Destination: C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f609.mp4
[debug] File locking is not supported. Proceeding without locking
[download] 100% of  433.89KiB in 00:00:00 at 2.18MiB/s
[debug] Invoking http downloader on "https://rr3---sn-8xgp1vo-gpje.googlevideo.com/videoplayback?expire=1723863442&ei=Mr2_ZrH-J8aGkucP0s6K8AM&ip=70.104.195.206&id=o-AE1GGzGzQsINFPZd9f7B7xuDwOYmCfukzKp1FHzwDroM&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&mh=Zm&mm=31%2C29&mn=sn-8xgp1vo-gpje%2Csn-8xgp1vo-p5qe&ms=au%2Crdu&mv=m&mvi=3&pl=20&initcwndbps=1132500&vprv=1&svpuc=1&mime=audio%2Fmp4&rqh=1&gir=yes&clen=136433&dur=8.382&lmt=1721152068135617&mt=1723841605&fvip=8&keepalive=yes&c=IOS&txp=5532434&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRAIgaOTTacra09SEayNb5GtemOlv2MHBLr7nccvLI5EacR8CIC0bMKc8DdhFgzgHTBmNSeddSnIsR8yE2UeC3gIQn7WI&lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Cinitcwndbps&lsig=AGtxev0wRQIgCnHmvb4SQe-XlCFsVhokgoWOUaHU2VUWKYuzDFihP_UCIQDsnSOKXL3il_L4ITeI--Sx5fxoSP2lRd6ior7L7A8E6g%3D%3D"
[download] Destination: C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f140.m4a
[download] 100% of  133.24KiB in 00:00:00 at 3.37MiB/s
[Merger] Merging formats into "C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f609.mp4 -i file:C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f140.m4a -c copy -map 0:v:0 -map 1:a:0 -movflags +faststart file:C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.temp.mp4
Deleting original file C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f140.m4a (pass -k to keep)
Deleting original file C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.f609.mp4 (pass -k to keep)
[ModifyChapters] SponsorBlock information is unavailable
[Metadata] Adding metadata to "C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.mp4 -map 0 -dn -ignore_unknown -c copy -write_id3v1 1 -metadata "title=ONE OF THE BEST SPONGEBOB MOMENTS #spongebobsquarepants #nickelodeon #roadto50k" -metadata "date=20240627" -metadata "purl=https://www.youtube.com/watch?v=mciDRnz8nrM" -metadata "comment=https://www.youtube.com/watch?v=mciDRnz8nrM" -metadata "artist=Blazing Bolt" -metadata:s:1 "language=eng" -movflags +faststart file:C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.temp.mp4
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    title           : ONE OF THE BEST SPONGEBOB MOMENTS #spongebobsquarepants #nickelodeon #roadto50k
    artist          : Blazing Bolt
    date            : 20240627
    encoder         : Lavf61.1.100
    comment         : https://www.youtube.com/watch?v=mciDRnz8nrM
  Duration: 00:00:08.38, start: 0.000000, bitrate: 557 kb/s
  Stream #0:0[0x1](und): Video: vp9 (Profile 0) (vp09 / 0x39307076), yuv420p(tv, bt709), 720x1280, 422 kb/s, 30 fps, 30 tbr, 16k tbn (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc. Created on: 08/16/2024.
        vendor_id       : [0][0][0][0]
  Stream #0:1[0x2](eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc.
        vendor_id       : [0][0][0][0]
Stream mapping:
  Stream #0:0 -> #0:0 (vp9 (native) -> h264 (libx264))
  Stream #0:1 -> #0:1 (aac (native) -> aac (native))
Press [q] to stop, [?] for help
[libx264 @ 000001e74d6108c0] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 BMI2 AVX2
[libx264 @ 000001e74d6108c0] profile High, level 3.1, 4:2:0, 8-bit
[libx264 @ 000001e74d6108c0] 264 - core 164 r3191 4613ac3 - H.264/MPEG-4 AVC codec - Copyleft 2003-2024 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=24 lookahead_threads=4 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'C:\Temp\yt-dlp\ONE_OF_THE_BEST_SPONGEBOB_MOMENTS_spongebobsquarepants_nickelodeon_roadto50k_reencoded.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    title           : ONE OF THE BEST SPONGEBOB MOMENTS #spongebobsquarepants #nickelodeon #roadto50k
    artist          : Blazing Bolt
    date            : 20240627
    comment         : https://www.youtube.com/watch?v=mciDRnz8nrM
    encoder         : Lavf61.1.100
  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, bt709, progressive), 720x1280, q=2-31, 30 fps, 15360 tbn (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc. Created on: 08/16/2024.
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.3.100 libx264
      Side data:
        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc.
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.3.100 aac
[mp4 @ 000001e74d62ec80] Starting second pass: moving the moov atom to the beginning of the file
[out#0/mp4 @ 000001e74d62eb80] video:305KiB audio:131KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 2.409431%
frame=  250 fps=0.0 q=-1.0 Lsize=     446KiB time=00:00:08.26 bitrate= 442.4kbits/s speed=21.5x
[libx264 @ 000001e74d6108c0] frame I:1     Avg QP:15.69  size: 26180
[libx264 @ 000001e74d6108c0] frame P:68    Avg QP:17.62  size:  3391
[libx264 @ 000001e74d6108c0] frame B:181   Avg QP:18.69  size:   304
[libx264 @ 000001e74d6108c0] consecutive B-frames:  1.6%  3.2%  7.2% 88.0%
[libx264 @ 000001e74d6108c0] mb I  I16..4: 34.1% 50.9% 15.0%
[libx264 @ 000001e74d6108c0] mb P  I16..4:  0.3%  1.1%  0.9%  P16..4:  4.0%  1.6%  1.1%  0.0%  0.0%    skip:91.1%
[libx264 @ 000001e74d6108c0] mb B  I16..4:  0.0%  0.0%  0.0%  B16..8:  2.8%  0.2%  0.1%  direct: 0.0%  skip:96.8%  L0:42.3% L1:55.3% BI: 2.4%
[libx264 @ 000001e74d6108c0] 8x8 transform intra:48.7% inter:54.6%
[libx264 @ 000001e74d6108c0] coded y,uvDC,uvAC intra: 47.6% 51.3% 26.7% inter: 0.7% 0.8% 0.1%
[libx264 @ 000001e74d6108c0] i16 v,h,dc,p: 68% 21%  7%  5%
[libx264 @ 000001e74d6108c0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 20% 39% 18%  4%  2%  2%  3%  3%  8%
[libx264 @ 000001e74d6108c0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 25% 29% 14%  5%  4%  4%  7%  5%  7%
[libx264 @ 000001e74d6108c0] i8c dc,h,v,p: 52% 25% 17%  6%
[libx264 @ 000001e74d6108c0] Weighted P-Frames: Y:0.0% UV:0.0%
[libx264 @ 000001e74d6108c0] ref P L0: 77.8%  7.5% 10.5%  4.1%
[libx264 @ 000001e74d6108c0] ref B L0: 81.6% 16.2%  2.2%
[libx264 @ 000001e74d6108c0] ref B L1: 97.4%  2.6%
[libx264 @ 000001e74d6108c0] kb/s:299.26
[aac @ 000001e74d981780] Qavg: 2388.565

PS C:\Users\kushal\src\myhtml\fromnepal>









$url = "https://v.redd.it/sio0bgg766jd1"
$tempDir = "C:\Temp\yt-dlp"
New-Item -ItemType Directory -Path $tempDir -Force

yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4" --sponsorblock-mark all --sponsorblock-remove all --merge-output-format mp4 -o "$tempDir\%(title)s.%(ext)s" $url

$videoFile = Get-ChildItem -Path $tempDir -Filter *.mp4 | Select-Object -First 1
$subtitleFile = Get-ChildItem -Path $tempDir -Filter *.vtt | Select-Object -First 1

if ($subtitleFile) {
    $subtitlePath = $subtitleFile.FullName -replace '\\', '\\\\'
    ffmpeg -i "$($videoFile.FullName)" -vf "subtitles='$subtitlePath'" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4"
} else {
    ffmpeg -i "$($videoFile.FullName)" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4"
}

Move-Item -Path "$tempDir\$($videoFile.BaseName)_reencoded.mp4" -Destination "\\TP-Share\G\shared\jellyfin\shows\downloaded"
Remove-Item -Path $tempDir -Recurse -Force




























































































needs more debugging? 

PS C:\Users\kushal\src\myhtml\fromnepal> cd "C:\Users\kushal\src\myhtml\fromnepal\public\notes\"; .\download_video.ps1  -url "https://youtu.be/VURjP8ql4BE"

Monday, September 2, 2024 3:15:22 PM

PSPath              : Microsoft.PowerShell.Core\FileSystem::C:\Temp\yt-dlp
PSParentPath        : Microsoft.PowerShell.Core\FileSystem::C:\Temp
PSChildName         : yt-dlp
PSDrive             : C
PSProvider          : Microsoft.PowerShell.Core\FileSystem
PSIsContainer       : True
Name                : yt-dlp
Parent              : C:\Temp
Root                : C:\
Exists              : True
FullName            : C:\Temp\yt-dlp
Extension           :
CreationTime        : 9/2/2024 3:15:22 PM
CreationTimeUtc     : 9/2/2024 7:15:22 PM
LastAccessTime      : 9/2/2024 3:15:22 PM
LastAccessTimeUtc   : 9/2/2024 7:15:22 PM
LastWriteTime       : 9/2/2024 3:15:22 PM
LastWriteTimeUtc    : 9/2/2024 7:15:22 PM
LinkTarget          :
UnixFileMode        : -1
Attributes          : Directory
Mode                : d----
ModeWithoutHardLink : d----
BaseName            : yt-dlp
ResolvedTarget      : C:\Temp\yt-dlp
Target              :
LinkType            :

Monday, September 2, 2024 3:15:22 PM
[debug] Command-line config: ['--verbose', '--write-sub', '--sub-lang', 'en', '--restrict-filenames', '--add-metadata', '-f', 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4', '--sponsorblock-mark', 'all', '--sponsorblock-remove', 'all', '--merge-output-format', 'mp4', '-o', 'C:\\Temp\\yt-dlp\\%(id)s.%(ext)s', 'https://youtu.be/VURjP8ql4BE']
[debug] Portable config "C:\Users\kushal\scoop\apps\yt-dlp\current\yt-dlp.conf": []
[debug] Encodings: locale cp1252, fs utf-8, pref cp1252, out utf-8, error utf-8, screen utf-8
[debug] yt-dlp version stable@2024.08.06 from yt-dlp/yt-dlp [4d9231208] (win_exe)
[debug] Python 3.8.10 (CPython AMD64 64bit) - Windows-10-10.0.22631-SP0 (OpenSSL 1.1.1k  25 Mar 2021)
[debug] exe versions: ffmpeg 7.0.2-full_build-www.gyan.dev (setts), ffprobe 7.0.2-full_build-www.gyan.dev
[debug] Optional libraries: Cryptodome-3.20.0, brotli-1.1.0, certifi-2024.07.04, curl_cffi-0.5.10, mutagen-1.47.0, requests-2.32.3, sqlite3-3.35.5, urllib3-2.2.2, websockets-12.0
[debug] Proxy map: {}
[debug] Request Handlers: urllib, requests, websockets, curl_cffi
[debug] Loaded 1830 extractors
[youtube] Extracting URL: https://youtu.be/VURjP8ql4BE
[youtube] VURjP8ql4BE: Downloading webpage
[youtube] VURjP8ql4BE: Downloading ios player API JSON
[youtube] VURjP8ql4BE: Downloading web creator player API JSON
[debug] [youtube] Extracting signature function js_57c75fa4_111
[debug] Loading youtube-sigfuncs.js_57c75fa4_111 from cache
[debug] Loading youtube-nsig.57c75fa4 from cache
[debug] [youtube] Decrypted nsig Kt1YwiibI6IeUHF => jGPW6btETSc5eA
[youtube] VURjP8ql4BE: Downloading m3u8 information
[info] VURjP8ql4BE: Downloading subtitles: en
[debug] Sort order given by extractor: quality, res, fps, hdr:12, source, vcodec:vp9.2, channels, acodec, lang, proto
[debug] Formats sorted by: hasvid, ie_pref, quality, res, fps, hdr:12(7), source, vcodec:vp9.2(10), channels, acodec, lang, proto, size, br, asr, vext, aext, hasaud, id
[SponsorBlock] Fetching SponsorBlock segments
[debug] SponsorBlock query: https://sponsor.ajay.app/api/skipSegments/3bcc?service=YouTube&categories=%5B%22filler%22%2C+%22sponsor%22%2C+%22preview%22%2C+%22music_offtopic%22%2C+%22selfpromo%22%2C+%22interaction%22%2C+%22chapter%22%2C+%22intro%22%2C+%22outro%22%2C+%22poi_highlight%22%5D&actionTypes=%5B%22skip%22%2C+%22poi%22%2C+%22chapter%22%5D
[SponsorBlock] No matching segments were found in the SponsorBlock database
[info] VURjP8ql4BE: Downloading 1 format(s): 614+140
[info] Writing video subtitles to: C:\Temp\yt-dlp\VURjP8ql4BE.en.vtt
[debug] Invoking http downloader on "https://www.youtube.com/api/timedtext?v=VURjP8ql4BE&ei=zQ7WZvKuKom0kucPkfX6kAg&caps=asr&opi=112496729&exp=xbt&xoaf=5&hl=en&ip=0.0.0.0&ipbits=0&expire=1725329725&sparams=ip%2Cipbits%2Cexpire%2Cv%2Cei%2Ccaps%2Copi%2Cexp%2Cxoaf&signature=6A168DEC966266DEC508EEF877F5F59231D7878A.81F774AD7D6548E345FF78DC103BFD70EBF4DE90&key=yt8&lang=en&fmt=vtt"
[debug] File locking is not supported. Proceeding without locking
[download] Destination: C:\Temp\yt-dlp\VURjP8ql4BE.en.vtt
[download] 100% of    1.55KiB in 00:00:00 at 35.79KiB/s
[debug] Invoking hlsnative downloader on "https://manifest.googlevideo.com/api/manifest/hls_playlist/expire/1725326125/ei/zQ7WZsynJPq1kucP_Jb_oAE/ip/70.104.195.206/id/5544633fcaa5e011/itag/614/source/youtube/requiressl/yes/ratebypass/yes/pfa/1/wft/1/sgovp/clen%3D21323308%3Bdur%3D164.831%3Bgir%3Dyes%3Bitag%3D248%3Blmt%3D1630513256195731/rqh/1/hls_chunk_host/rr1---sn-8xgp1vo-gpje.googlevideo.com/xpc/EgVo2aDSNQ%3D%3D/mh/PC/mm/31,29/mn/sn-8xgp1vo-gpje,sn-8xgp1vo-p5qe/ms/au,rdu/mv/m/mvi/1/pcm2cms/yes/pl/20/initcwndbps/1098750/vprv/1/playlist_type/DVR/dover/13/txp/5432434/mt/1725304148/fvip/6/short_key/1/keepalive/yes/sparams/expire,ei,ip,id,itag,source,requiressl,ratebypass,pfa,wft,sgovp,rqh,xpc,vprv,playlist_type/sig/AJfQdSswRQIgDTsNkyEDK6HHVGo1vsq9UO0Y7lVPZx9TE1uEcDdgTCwCIQDUVv1ct67ySAGUcWMpWX1Rikd_pKk5OqTsSrHBtFeJFQ%3D%3D/lsparams/hls_chunk_host,mh,mm,mn,ms,mv,mvi,pcm2cms,pl,initcwndbps/lsig/ABPmVW0wRQIgea32nYAzb1kPD8gAkDXz_VcF_hTvUwTIAEenbqJCxPsCIQCYmTGeAo8cziv3uMJi4EYHIQEsoRfY1wqdECWdoNzweg%3D%3D/playlist/index.m3u8"
[hlsnative] Downloading m3u8 manifest
[hlsnative] Total fragments: 32
[download] Destination: C:\Temp\yt-dlp\VURjP8ql4BE.f614.mp4
[download] 100% of   20.36MiB in 00:00:02 at 9.64MiB/s
[debug] Invoking http downloader on "https://rr1---sn-8xgp1vo-gpje.googlevideo.com/videoplayback?expire=1725326125&ei=zQ7WZsynJPq1kucP_Jb_oAE&ip=70.104.195.206&id=o-AMbAuIdAXhxHrQoNX8tSVdUGLpyI4UEc3otzc0sx_Tmp&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&mh=PC&mm=31%2C29&mn=sn-8xgp1vo-gpje%2Csn-8xgp1vo-p5qe&ms=au%2Crdu&mv=m&mvi=1&pcm2cms=yes&pl=20&initcwndbps=1098750&vprv=1&svpuc=1&mime=audio%2Fmp4&rqh=1&gir=yes&clen=2669949&dur=164.931&lmt=1630511535271639&mt=1725304148&fvip=6&keepalive=yes&c=IOS&txp=5432434&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRgIhALPLuTayTy_9XCckY7GV95JobbPcc5ACmkhpnG0ZXrbmAiEAhItjBGbhZ_ef5ohl3fJvDLJAusGsghVkLRcvMvdWUC8%3D&lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpcm2cms%2Cpl%2Cinitcwndbps&lsig=ABPmVW0wRAIgcYuMl5hZ1Rif4DOPBAT0RiWVx9Dz1RDeNIZLP2YPiPMCIHTECNqG8p-1YhrPorM00ACAsurkEICyB7fNRH1ciZ_w"
[download] Destination: C:\Temp\yt-dlp\VURjP8ql4BE.f140.m4a
[download] 100% of    2.55MiB in 00:00:00 at 19.09MiB/s
[Merger] Merging formats into "C:\Temp\yt-dlp\VURjP8ql4BE.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\VURjP8ql4BE.f614.mp4 -i file:C:\Temp\yt-dlp\VURjP8ql4BE.f140.m4a -c copy -map 0:v:0 -map 1:a:0 -movflags +faststart file:C:\Temp\yt-dlp\VURjP8ql4BE.temp.mp4
Deleting original file C:\Temp\yt-dlp\VURjP8ql4BE.f614.mp4 (pass -k to keep)
Deleting original file C:\Temp\yt-dlp\VURjP8ql4BE.f140.m4a (pass -k to keep)
[ModifyChapters] SponsorBlock information is unavailable
[Metadata] Adding metadata to "C:\Temp\yt-dlp\VURjP8ql4BE.mp4"
[debug] ffmpeg command line: ffmpeg -y -loglevel repeat+info -i file:C:\Temp\yt-dlp\VURjP8ql4BE.mp4 -map 0 -dn -ignore_unknown -c copy -write_id3v1 1 -metadata "title=íŠ¸ì™€ì´ìŠ¤ (TWICE) TZUYU \"A Little Happiness å°å¹¸è¿\" with Lyrics" -metadata "date=20210301" -metadata "description=Music & Video edited by Brian Cheong
Source: vlive.tv/post/1-21563581
_________________________________________________
On 28th Feb, Tzuyu sang  \"A Little Happiness\" during her VLIVE live ğŸ˜
Instrumental music is added ğŸµ Hope you guys like it ğŸ’•

210228 å­ç‘œåœ¨VLIVEæ¸…å”±äº† ã€Šå°å¹¸è¿ã€‹ ğŸ€
åŠ äº†èƒŒæ™¯éŸ³ä¹çš„ç‰ˆæœ¬ ğŸ¶ å¸Œæœ›å¤§å®¶ä¼šå–œæ¬¢ â¤ï¸
_________________________________________________
#TWICEâ€‹ #TZUYUâ€‹ #å°å¹¸è¿ #ALittleHappiness #Cover #VLIVE" -metadata "synopsis=Music & Video edited by Brian Cheong
Source: vlive.tv/post/1-21563581
_________________________________________________
On 28th Feb, Tzuyu sang  \"A Little Happiness\" during her VLIVE live ğŸ˜
Instrumental music is added ğŸµ Hope you guys like it ğŸ’•

210228 å­ç‘œåœ¨VLIVEæ¸…å”±äº† ã€Šå°å¹¸è¿ã€‹ ğŸ€
åŠ äº†èƒŒæ™¯éŸ³ä¹çš„ç‰ˆæœ¬ ğŸ¶ å¸Œæœ›å¤§å®¶ä¼šå–œæ¬¢ â¤ï¸
_________________________________________________
#TWICEâ€‹ #TZUYUâ€‹ #å°å¹¸è¿ #ALittleHappiness #Cover #VLIVE" -metadata "purl=https://www.youtube.com/watch?v=VURjP8ql4BE" -metadata "comment=https://www.youtube.com/watch?v=VURjP8ql4BE" -metadata "artist=Brian Cheong" -movflags +faststart file:C:\Temp\yt-dlp\VURjP8ql4BE.temp.mp4
Monday, September 2, 2024 3:15:29 PM
Monday, September 2, 2024 3:15:29 PM
Monday, September 2, 2024 3:15:29 PM

LastWriteTime : 9/2/2024 3:15:27 PM
Length        : 1584
Name          : VURjP8ql4BE.en.vtt


LastWriteTime : 9/1/2021 11:52:15 AM
Length        : 24097623
Name          : VURjP8ql4BE.mp4


LastWriteTime : 9/2/2024 3:15:27 PM
Length        : 1584
Name          : VURjP8ql4BE.en.vtt


LastWriteTime : 9/1/2021 11:52:15 AM
Length        : 24097623
Name          : VURjP8ql4BE.mp4


LastWriteTime : 9/1/2021 11:52:15 AM
Length        : 24097623
Name          : VURjP8ql4BE.mp4


LastWriteTime : 9/2/2024 3:15:27 PM
Length        : 1584
Name          : VURjP8ql4BE.en.vtt

Cleaned subtitle path: C:\Temp\yt-dlp\VURjP8ql4BEenvtt
Cleaned video name: VURjP8ql4BEmp4
Cleaned video path: C:\Temp\yt-dlp\VURjP8ql4BEmp4
Running ffmpeg with subtitles
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
Splitting the commandline.
Reading option '-loglevel' ... matched as option 'loglevel' (set logging level) with argument 'debug'.
Reading option '-i' ... matched as input url with argument 'C:\Temp\yt-dlp\VURjP8ql4BEmp4'.
Reading option '-vf' ... matched as option 'vf' (alias for -filter:v (apply filters to video streams)) with argument 'subtitles=\'.
Reading option 'C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24'' ... matched as output url.
Reading option '-c:v' ... matched as option 'c' (select encoder/decoder ('copy' to copy stream without reencoding)) with argument 'libx264'.
Reading option '-c:a' ... matched as option 'c' (select encoder/decoder ('copy' to copy stream without reencoding)) with argument 'aac'.
Reading option '-strict' ...Routing option strict to both codec and muxer layer
 matched as AVOption 'strict' with argument 'experimental'.
Reading option '-movflags' ... matched as AVOption 'movflags' with argument '+faststart'.
Reading option 'C:\Temp\yt-dlp\VURjP8ql4BEmp4_reencoded.mp4' ... matched as output url.
Finished splitting the commandline.
Parsing a group of options: global .
Applying option loglevel (set logging level) with argument debug.
Successfully parsed a group of options.
Parsing a group of options: input url C:\Temp\yt-dlp\VURjP8ql4BEmp4.
Successfully parsed a group of options.
Opening an input file: C:\Temp\yt-dlp\VURjP8ql4BEmp4.
[AVFormatContext @ 0000023d1c021540] Opening 'C:\Temp\yt-dlp\VURjP8ql4BEmp4' for reading
[file @ 0000023d1c022380] Setting default whitelist 'file,crypto,data'
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Format mov,mp4,m4a,3gp,3g2,mj2 probed with size=2048 and score=100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] ISO: File Type Major Brand: isom
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Unknown dref type 0x206c7275 size 12
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Processing st: 0, edit list 0 - media time: 0, duration: 2637312
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Unknown dref type 0x206c7275 size 12
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Processing st: 1, edit list 0 - media time: 0, duration: 7273501
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 29.833333 0.016672
    Last message repeated 1 times
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 29.916667 0.002592
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 29.916667 0.018902
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 30.000000 0.000887
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 60.000000 0.003547
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 120.000000 0.014188
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 29.970030 0.000075
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] rfps: 59.940060 0.000300
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] Before avformat_find_stream_info() pos: 171299 bytes read:196608 seeks:0 nb_streams:2
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 64, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft32_asm_float_fma3 - type: fft_float, len: 32, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 64, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft32_asm_float_fma3 - type: fft_float, len: 32, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 120, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_pfa_15xM_asm_float_avx2 - type: fft_float, len: 60, factors[2]: [15, 2], flags: [aligned, inplace, out_of_place, preshuf, asm_call]
            fft4_fwd_asm_float_sse2 - type: fft_float, len: 4, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 128, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_sr_asm_float_fma3 - type: fft_float, len: 64, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 480, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_pfa_15xM_asm_float_avx2 - type: fft_float, len: 240, factors[2]: [15, 2], flags: [aligned, inplace, out_of_place, preshuf, asm_call]
            fft16_asm_float_fma3 - type: fft_float, len: 16, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 512, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_sr_asm_float_fma3 - type: fft_float, len: 256, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 960, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_pfa_15xM_asm_float_avx2 - type: fft_float, len: 480, factors[2]: [15, 2], flags: [aligned, inplace, out_of_place, preshuf, asm_call]
            fft32_asm_float_fma3 - type: fft_float, len: 32, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_inv_float_avx2 - type: mdct_float, len: 1024, factors[2]: [2, any], flags: [aligned, out_of_place, inv_only]
        fft_sr_asm_float_fma3 - type: fft_float, len: 512, factor: 2, flags: [aligned, inplace, out_of_place, preshuf, asm_call]
Transform tree:
    mdct_fwd_float_c - type: mdct_float, len: 1024, factors[2]: [2, any], flags: [unaligned, out_of_place, fwd_only]
        fft_sr_ns_float_fma3 - type: fft_float, len: 512, factor: 2, flags: [aligned, inplace, out_of_place, preshuf]
[vp9 @ 0000023d1c035280] Format yuv420p chosen by get_format().
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] All info found
[mov,mp4,m4a,3gp,3g2,mj2 @ 0000023d1c021540] After avformat_find_stream_info() pos: 204803 bytes read:229376 seeks:0 frames:2
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Temp\yt-dlp\VURjP8ql4BEmp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    title           : íŠ¸ì™€ì´ìŠ¤ (TWICE) TZUYU "A Little Happiness å°å¹¸è¿" with Lyrics
    artist          : Brian Cheong
    date            : 20210301
    encoder         : Lavf61.1.100
    comment         : https://www.youtube.com/watch?v=VURjP8ql4BE
    description     : Music & Video edited by Brian Cheong
                    : Source: vlive.tv/post/1-21563581
                    : _________________________________________________
                    : On 28th Feb, Tzuyu sang  "A Little Happiness" during her VLIVE live ğŸ˜
                    : Instrumental music is added ğŸµ Hope you guys like it ğŸ’•
                    :
                    : 210228 å­ç‘œåœ¨VLIVEæ¸…å”±äº† ã€Šå°å¹¸è¿ã€‹ ğŸ€
                    : åŠ äº†èƒŒæ™¯éŸ³ä¹çš„ç‰ˆæœ¬ ğŸ¶ å¸Œæœ›å¤§å®¶ä¼šå–œæ¬¢ â¤ï¸
                    : _________________________________________________
                    : #TWICEâ€‹ #TZUYUâ€‹ #å°å¹¸è¿ #ALittleHappiness #Cover #VLIVE
    synopsis        : Music & Video edited by Brian Cheong
                    : Source: vlive.tv/post/1-21563581
                    : _________________________________________________
                    : On 28th Feb, Tzuyu sang  "A Little Happiness" during her VLIVE live ğŸ˜
                    : Instrumental music is added ğŸµ Hope you guys like it ğŸ’•
                    :
                    : 210228 å­ç‘œåœ¨VLIVEæ¸…å”±äº† ã€Šå°å¹¸è¿ã€‹ ğŸ€
                    : åŠ äº†èƒŒæ™¯éŸ³ä¹çš„ç‰ˆæœ¬ ğŸ¶ å¸Œæœ›å¤§å®¶ä¼šå–œæ¬¢ â¤ï¸
                    : _________________________________________________
                    : #TWICEâ€‹ #TZUYUâ€‹ #å°å¹¸è¿ #ALittleHappiness #Cover #VLIVE
  Duration: 00:02:44.93, start: 0.000000, bitrate: 1168 kb/s
  Stream #0:0[0x1](und), 1, 1/16000: Video: vp9 (Profile 0), 1 reference frame (vp09 / 0x39307076), yuv420p(tv, bt709), 1920x1080, 0/1, 1033 kb/s, 29.97 fps, 29.97 tbr, 16k tbn (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc. Created on: 09/02/2024.
        vendor_id       : [0][0][0][0]
  Stream #0:1[0x2](und), 1, 1/44100: Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)
      Metadata:
        handler_name    : ISO Media file produced by Google Inc.
        vendor_id       : [0][0][0][0]
Successfully opened the file.
Parsing a group of options: output url C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24'.
Applying option vf (alias for -filter:v (apply filters to video streams)) with argument subtitles=\.
Successfully parsed a group of options.
Opening an output file: C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24'.
[AVFormatContext @ 0000023d1c4acb40] Unable to choose an output format for 'C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24''; use a standard extension for the filename or specify the format manually.
[out#0 @ 0000023d1c52a480] Error initializing the muxer for C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24': Invalid argument
Error opening output file C:\Temp\yt-dlp\VURjP8ql4BEenvtt\:force_style='FontName=Arial,FontSize=24'.
Error opening output files: Invalid argument
[AVIOContext @ 0000023d1c0225c0] Statistics: 229376 bytes read, 0 seeks
Monday, September 2, 2024 3:15:29 PM
Move-Item: C:\Users\kushal\src\myhtml\fromnepal\public\notes\download_video.ps1:52
Line |
  52 |  Move-Item -Path "$tempDir\$($videoFile.BaseName)_reencoded.mp4" -Dest â€¦
     |  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     | Cannot find path 'C:\Temp\yt-dlp\VURjP8ql4BEmp4_reencoded.mp4' because it does not exist.
Monday, September 2, 2024 3:15:29 PM
Monday, September 2, 2024 3:15:29 PM

context 

param (
    [string]$url
)

$tempDir = "C:\Temp\yt-dlp"
date;
New-Item -ItemType Directory -Path $tempDir -Force
dir $tempDir
date;
yt-dlp.exe --verbose --write-sub --sub-lang en --restrict-filenames --add-metadata -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4" --sponsorblock-mark all --sponsorblock-remove all --merge-output-format mp4 -o "$tempDir\%(id)s.%(ext)s" $url
date;
$videoFile = Get-ChildItem -Path $tempDir -Filter *.mp4 | Select-Object -First 1
date;
$subtitleFile = Get-ChildItem -Path $tempDir -Filter *.vtt | Select-Object -First 1
date;
dir $tempDir;
ls $tempDir;
$videoFile;
$subtitleFile;
# Function to clean file names
function Clean-FileName {
    param (
        [string]$fileName
    )
    return $fileName -replace '[^A-Za-z0-9]', ''
}

if ($subtitleFile) {
    $subtitlePath = $subtitleFile.FullName
    $cleanSubtitleName = Clean-FileName -fileName $subtitleFile.Name
    $cleanSubtitlePath = Join-Path -Path $tempDir -ChildPath $cleanSubtitleName
    Rename-Item -Path $subtitlePath -NewName $cleanSubtitlePath
    $subtitlePath = $cleanSubtitlePath
    echo "Cleaned subtitle path: $subtitlePath"
}

$cleanVideoName = Clean-FileName -fileName $videoFile.Name
echo "Cleaned video name: $cleanVideoName"
$cleanVideoPath = Join-Path -Path $tempDir -ChildPath $cleanVideoName
Rename-Item -Path $videoFile.FullName -NewName $cleanVideoPath
$videoFile = Get-Item -Path $cleanVideoPath
echo "Cleaned video path: $($videoFile.FullName)"

if ($subtitleFile) {
    echo "Running ffmpeg with subtitles"
    ffmpeg -loglevel debug -i "$($videoFile.FullName)" -vf "subtitles=\"$subtitlePath\":force_style='FontName=Arial,FontSize=24'" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4"
} else {
    echo "Running ffmpeg without subtitles"
    ffmpeg -i "$($videoFile.FullName)" -c:v libx264 -c:a aac -strict experimental -movflags +faststart "$tempDir\$($videoFile.BaseName)_reencoded.mp4"
}
date;
Move-Item -Path "$tempDir\$($videoFile.BaseName)_reencoded.mp4" -Destination "\\TP-Share\G\shared\jellyfin\shows\downloaded"
date;
Remove-Item -Path $tempDir -Recurse -Force
date;

date; ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C:\Users\kushal\Videos\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

PS C:\Users\kushal\src\myhtml\fromnepal> date; ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C:\Users\kushal\Videos\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

Friday, September 6, 2024 8:01:23 PM
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[h264 @ 000001a13df35c80] Reinit context to 2560x1600, pix_fmt: yuvj420p
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Users\kushal\Videos\20240822174505_001589F.MP4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2024-08-22T17:55:04.000000Z
  Duration: 00:10:00.00, start: 0.000000, bitrate: 29838 kb/s
  Stream #0:0[0x1](eng): Video: h264 (High), 1 reference frame (avc1 / 0x31637661), yuvj420p(pc, bt709, progressive, left), 2560x1600, 29491 kb/s, 30 fps, 30 tbr, 92400 tbn (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : VideoHandler
        vendor_id       : [0][0][0][0]
        encoder         : h264
  Stream #0:1[0x2](eng): Audio: aac (LC) (mp4a / 0x6134706D), 32000 Hz, mono, fltp, 96 kb/s (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : SoundHandler
        vendor_id       : [0][0][0][0]
[out#0/mp4 @ 000001a13df21f80] No explicit maps, mapping streams automatically...
[vost#0:0/libx264 @ 000001a13e906580] Created video stream from input stream 0:0
[Parsed_nnedi_0 @ 000001a13df26980] [Eval @ 000000520f7fd4f0] Undefined constant or missing '(' in 'UserskushalVideosnnedi3_weights.bin'
[Parsed_nnedi_0 @ 000001a13df26980] Unable to parse option value "UserskushalVideosnnedi3_weights.bin"
Error applying option 'deint' to filter 'nnedi': Invalid argument
[vost#0:0/libx264 @ 000001a13e906580] Error initializing a simple filtergraph
Error opening output file C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4.
Error opening output files: Invalid argument
[AVIOContext @ 000001a13df22c80] Statistics: 599633 bytes read, 2 seeks
Friday, September 6, 2024 8:01:23 PM

date; ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C\\:\\\\Users\\\\kushal\\\\Videos\\\\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

PS C:\Users\kushal\src\myhtml\fromnepal> date; ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C\\:\\\\Users\\\\kushal\\\\Videos\\\\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

Friday, September 6, 2024 8:02:38 PM
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[h264 @ 0000015d58f85cc0] Reinit context to 2560x1600, pix_fmt: yuvj420p
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Users\kushal\Videos\20240822174505_001589F.MP4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2024-08-22T17:55:04.000000Z
  Duration: 00:10:00.00, start: 0.000000, bitrate: 29838 kb/s
  Stream #0:0[0x1](eng): Video: h264 (High), 1 reference frame (avc1 / 0x31637661), yuvj420p(pc, bt709, progressive, left), 2560x1600, 29491 kb/s, 30 fps, 30 tbr, 92400 tbn (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : VideoHandler
        vendor_id       : [0][0][0][0]
        encoder         : h264
  Stream #0:1[0x2](eng): Audio: aac (LC) (mp4a / 0x6134706D), 32000 Hz, mono, fltp, 96 kb/s (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : SoundHandler
        vendor_id       : [0][0][0][0]
[out#0/mp4 @ 0000015d5a04f2c0] No explicit maps, mapping streams automatically...
[vost#0:0/libx264 @ 0000015d5956ed40] Created video stream from input stream 0:0
[Parsed_nnedi_0 @ 0000015d58f769c0] [Eval @ 00000015103fd370] Undefined constant or missing '(' in '\\Users\\kushal\\Videos\\nnedi3_weights.bin'
[Parsed_nnedi_0 @ 0000015d58f769c0] Unable to parse option value "\\Users\\kushal\\Videos\\nnedi3_weights.bin"
Error applying option 'deint' to filter 'nnedi': Invalid argument
[vost#0:0/libx264 @ 0000015d5956ed40] Error initializing a simple filtergraph
Error opening output file C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4.
Error opening output files: Invalid argument
[AVIOContext @ 0000015d58f72b00] Statistics: 599633 bytes read, 2 seeks
Friday, September 6, 2024 8:02:38 PM

PS C:\Users\kushal\src\myhtml\fromnepal>





It looks like the issue persists with the path to the `nnedi3_weights.bin` file. Since you're using PowerShell on Windows 11, let's try a different approach to ensure the path is correctly interpreted.

### Corrected Command
In PowerShell, you can use double quotes for the entire filter string and escape the backslashes with a single backslash:

```powershell
date; 
ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C:\\Users\\kushal\\Videos\\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; 
date;
```

### Explanation
- `nnedi=weights='C:\\Users\\kushal\\Videos\\nnedi3_weights.bin'`: The path to the weights file is now correctly escaped for PowerShell.

This should resolve the issue with the path parsing. Give this command a try and let me know if it works!





date; ffmpeg -loglevel verbose -i "C:\Users\kushal\Videos\20240822174505_001589F.MP4" -vf "nnedi=weights='C:\\Users\\kushal\\Videos\\nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;









PS C:\Users\kushal\src\myhtml\fromnepal> date; cd "C:\Users\kushal\Videos"; date; ffmpeg -loglevel verbose -i "20240822174505_001589F.MP4" -vf "nnedi=weights='nnedi3_weights.bin':nsize=32:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

Friday, September 6, 2024 8:05:28 PM
Friday, September 6, 2024 8:05:28 PM
ffmpeg version 7.0.2-full_build-www.gyan.dev Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 13.2.0 (Rev5, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libaribcaption --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libxevd --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxeve --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-libharfbuzz --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-dxva2 --enable-d3d11va --enable-d3d12va --enable-ffnvcodec --enable-libvpl --enable-nvdec --enable-nvenc --enable-vaapi --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libcodec2 --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[h264 @ 000001fff51e4cc0] Reinit context to 2560x1600, pix_fmt: yuvj420p
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '20240822174505_001589F.MP4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2024-08-22T17:55:04.000000Z
  Duration: 00:10:00.00, start: 0.000000, bitrate: 29838 kb/s
  Stream #0:0[0x1](eng): Video: h264 (High), 1 reference frame (avc1 / 0x31637661), yuvj420p(pc, bt709, progressive, left), 2560x1600, 29491 kb/s, 30 fps, 30 tbr, 92400 tbn (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : VideoHandler
        vendor_id       : [0][0][0][0]
        encoder         : h264
  Stream #0:1[0x2](eng): Audio: aac (LC) (mp4a / 0x6134706D), 32000 Hz, mono, fltp, 96 kb/s (default)
      Metadata:
        creation_time   : 2024-08-22T17:55:04.000000Z
        handler_name    : SoundHandler
        vendor_id       : [0][0][0][0]
[out#0/mp4 @ 000001fff528ee40] No explicit maps, mapping streams automatically...
[vost#0:0/libx264 @ 000001fff581e900] Created video stream from input stream 0:0
[Parsed_nnedi_0 @ 000001fff63d1cc0] Value 32.000000 for parameter 'nsize' out of range [0 - 6]
Error applying option 'nsize' to filter 'nnedi': Result too large
[vost#0:0/libx264 @ 000001fff581e900] Error initializing a simple filtergraph
Error opening output file C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4.
Error opening output files: Result too large
[AVIOContext @ 000001fff51d1bc0] Statistics: 599633 bytes read, 2 seeks
Friday, September 6, 2024 8:05:28 PM

It looks like the issue now is with the `nsize` parameter. The value `32` is out of the acceptable range for this parameter. The valid range for `nsize` is from `0` to `6`.

Here are the valid values for `nsize`:
- `0`: 8x6
- `1`: 16x6
- `2`: 32x6
- `3`: 48x6
- `4`: 8x4
- `5`: 16x4
- `6`: 32x4

You can choose one of these values based on your needs. For example, if you want to use a larger neural network size, you can use `6` (32x4).

### Corrected Command
Let's use `nsize=6`:

```powershell
date; 
ffmpeg -loglevel verbose -i "20240822174505_001589F.MP4" -vf "nnedi=weights='nnedi3_weights.bin':nsize=6:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; 
date;
```

This should resolve the issue with the `nsize` parameter. Give this command a try and let me know if it works!



 date; cd "C:\Users\kushal\Videos"; date; ffmpeg -loglevel verbose -i "20240822174505_001589F.MP4" -vf "nnedi=weights='nnedi3_weights.bin':nsize=6:nns=4:qual=2:etype=0:pscrn=2,scale=3840:2160:flags=lanczos" -c:v libx264 -preset veryslow -crf 11 "C:\Users\kushal\Videos\daytime_dashcam_crf11_nnedi3.mp4"; date;

